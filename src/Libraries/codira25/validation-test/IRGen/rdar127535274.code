// RUN: %target-build-language -target %target-future-triple -g -Xfrontend -enable-experimental-feature -Xfrontend LayoutStringValueWitnesses -Xfrontend -enable-experimental-feature -Xfrontend LayoutStringValueWitnessesInstantiation -Xfrontend -enable-layout-string-value-witnesses -Xfrontend -enable-layout-string-value-witnesses-instantiation -Xfrontend -enable-library-evolution -c -parse-as-library -emit-ir %s | %FileCheck %s

// REQUIRES: language_feature_LayoutStringValueWitnesses
// REQUIRES: language_feature_LayoutStringValueWitnessesInstantiation

// CHECK: define internal ptr @"$s13rdar1275352744TestVMi"
// CHECK:  [[METADATA:%.*]] = call ptr @language_cvw_allocateGenericValueMetadataWithLayoutString
// CHECK:  call void @language_cvw_instantiateLayoutString(ptr @"type_layout_string l13rdar1275352744TestVyxG", ptr [[METADATA]])
// CHECK:  ret ptr [[METADATA]]
// CHECK: }
public struct Test<T> {
    immutable x: [T]
    immutable y: [T]
}
