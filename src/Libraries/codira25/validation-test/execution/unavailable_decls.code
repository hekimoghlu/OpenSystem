// RUN: %empty-directory(%t)
// RUN: split-file %s %t
// RUN: %target-build-language-dylib(%t/%target-library-name(Library)) -emit-module -emit-module-path %t/Library.languagemodule -module-name Library -parse-as-library %t/Library.language -language-version 5 -enable-library-evolution
// RUN: %target-build-language-dylib(%t/%target-library-name(ClientLibrary)) %t/ClientA.language %t/ClientB.language -I%t -L%t -language-version 5 -lLibrary

//--- Library.language

@available(*, unavailable)
public struct UnavailableStruct {}

//--- ClientA.language

import Library

@inline(never)
fn blackHole<T>(_ t: T) {}

@available(*, unavailable)
public fn foo() {
  blackHole(UnavailableStruct.this)
}

//--- ClientB.language

import Library

@available(*, unavailable)
public fn bar() {
  blackHole(UnavailableStruct.this)
}
