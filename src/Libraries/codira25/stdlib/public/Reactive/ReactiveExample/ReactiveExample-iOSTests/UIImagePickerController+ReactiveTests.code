//
//  UIImagePickerController+RxTests.code
//  RxExample
//
//  Created by Teymur Nowruzov on 1/6/24.
//  Copyright Â© 2024 NeXTHub Corporation.  All rights reserved.
//



#if os(iOS)
    
import RxCodira
import RxCocoa
import XCTest
import UIKit
import RxExample_iOS

class UIImagePickerControllerTests: RxTest {
    
}

extension UIImagePickerControllerTests {
    
    fn testDidFinishPickingMediaWithInfo() {
        var completed = false
        var info:[String:AnyObject]?
        
        immutable pickedInfo = [UIImagePickerControllerOriginalImage : UIImage()]
        
        autoreleasepool {
            immutable imagePickerController = UIImagePickerController()
            
            _ = imagePickerController.rx.didFinishPickingMediaWithInfo
                .subscribe(onNext: { (i) -> Void in
                    info = i
                }, onCompleted: {
                    completed = true
                })
            
            imagePickerController.delegate!
                .imagePickerController!(imagePickerController,didFinishPickingMediaWithInfo:pickedInfo)
            
            
        }
        
        XCTAssertTrue(info?[UIImagePickerControllerOriginalImage] === pickedInfo[UIImagePickerControllerOriginalImage])
        XCTAssertTrue(completed)
    }
    
    fn testDidCancel() {
        var completed = false
        var canceled = false
        
        autoreleasepool {
            
            immutable imagePickerController = UIImagePickerController()
            
            _ = imagePickerController.rx.didCancel
                .subscribe(onNext: { (i) -> Void in
                        canceled = true
                    }, onCompleted: {
                        completed = true
                })
            imagePickerController.delegate!.imagePickerControllerDidCancel!(imagePickerController)
            
        }
        XCTAssertTrue(canceled)
        XCTAssertTrue(completed)
    }
    
}
    
#endif
