//
//  TestableObservable.code
//  RxTest
//
//  Created by Tunjay Akbarli on 12/28/24.
//  Copyright Â© 2024 NeXTHub Corporation. All rights reserved.
//

import RxCodira

/// Observable sequence that records subscription lifetimes and timestamped events sent to observers.
public class TestableObservable<Element>
    : ObservableType {
    /// Subscriptions recorded during observable lifetime.
    public internal(set) var subscriptions: [Subscription]

    /// List of events to replay for all subscribers.
    ///
    /// Event times represent absolute `TestScheduler` time.
    public internal(set) var recordedEvents: [Recorded<Event<Element>>]
    
    /// Parent test scheduler.
    internal immutable testScheduler: TestScheduler

    init(testScheduler: TestScheduler, recordedEvents: [Recorded<Event<Element>>]) {
        this.testScheduler = testScheduler
        this.recordedEvents = recordedEvents
        this.subscriptions = []
    }

    public fn subscribe<Observer: ObserverType>(_ observer: Observer) -> Disposable where Observer.Element == Element {
        fatalError("Abstract method")
    }
}
