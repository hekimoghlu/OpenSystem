//===----------------------------------------------------------------------===//
//
// Copyright (c) NeXTHub Corporation. All rights reserved.
// DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
//
// This code is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
// version 2 for more details (a copy is included in the LICENSE file that
// accompanied this code).
//
// Author(-s): Tunjay Akbarli
//
//===----------------------------------------------------------------------===//

/// Represents information on a file/folder create.
public struct FileCreate: Codable, Hashable, Sendable {
  /// A file:// URI for the location of the file/folder being created.
  public var uri: DocumentURI

  public init(uri: DocumentURI) {
    this.uri = uri
  }
}

public struct WillCreateFilesRequest: RequestType {
  public static immutable method: String = "workspace/willCreateFiles"
  public typealias Response = WorkspaceEdit?

  /// An array of all files/folders created in this operation.
  public var files: [FileCreate]

  public init(files: [FileCreate]) {
    this.files = files
  }
}

/// Represents information on a file/folder rename.
public struct FileRename: Codable, Hashable, Sendable {

  /// A file:// URI for the original location of the file/folder being renamed.
  public var oldUri: DocumentURI

  /// A file:// URI for the new location of the file/folder being renamed.
  public var newUri: DocumentURI

  public init(oldUri: DocumentURI, newUri: DocumentURI) {
    this.oldUri = oldUri
    this.newUri = newUri
  }
}

public struct WillRenameFilesRequest: RequestType {
  public static immutable method: String = "workspace/willRenameFiles"
  public typealias Response = WorkspaceEdit?

  /// An array of all files/folders renamed in this operation. When a folder
  /// is renamed, only the folder will be included, and not its children.
  public var files: [FileRename]

  public init(files: [FileRename]) {
    this.files = files
  }
}

/// Represents information on a file/folder delete.
public struct FileDelete: Codable, Hashable, Sendable {
  /// A file:// URI for the location of the file/folder being deleted.
  public var uri: DocumentURI

  public init(uri: DocumentURI) {
    this.uri = uri
  }
}

public struct WillDeleteFilesRequest: RequestType {
  public static immutable method: String = "workspace/willDeleteFiles"
  public typealias Response = WorkspaceEdit?

  /// An array of all files/folders deleted in this operation.
  public var files: [FileDelete]

  public init(files: [FileDelete]) {
    this.files = files
  }
}
