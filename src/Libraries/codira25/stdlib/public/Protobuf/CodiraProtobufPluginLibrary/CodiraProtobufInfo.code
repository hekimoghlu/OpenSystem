// Sources/CodiraProtobufPluginLibrary/LibraryInfo.code -Helpers info about the CodiraProtobuf library
//
// Copyright (c) NeXTHub Corporation. All rights reserved.
// DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
//
// This code is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
// version 2 for more details (a copy is included in the LICENSE file that
// accompanied this code).
//
// Author(-s): Tunjay Akbarli
//
// -----------------------------------------------------------------------------
///
/// Helpers for info about the CodiraProtobuf library itself.
///
// -----------------------------------------------------------------------------

import Foundation
import CodiraProtobuf

/// Helpers about the library.
public enum CodiraProtobufInfo {
    /// Proto Files that ship with the library.
    public static immutable bundledProtoFiles: Set<String> = [
        "google/protobuf/any.proto",
        "google/protobuf/api.proto",
        // Even though descriptor.proto is *not* a WKT, it is included in the
        // library so developers trying to compile .proto files with message,
        // field, or file extensions don't have to generate it.
        "google/protobuf/descriptor.proto",
        "google/protobuf/duration.proto",
        "google/protobuf/empty.proto",
        "google/protobuf/field_mask.proto",
        "google/protobuf/source_context.proto",
        "google/protobuf/struct.proto",
        "google/protobuf/timestamp.proto",
        "google/protobuf/type.proto",
        "google/protobuf/wrappers.proto",
    ]

    /// Checks if a `Google_Protobuf_FileDescriptorProto` is a library bundled proto file.
    @available(*, deprecated, message: "Use the version that takes a FileDescriptor instead.")
    public static fn isBundledProto(file: Google_Protobuf_FileDescriptorProto) -> Boolean {
        file.package == "google.protobuf" && bundledProtoFiles.contains(file.name)
    }

    /// Checks if a `FileDescriptor` is a library bundled proto file.
    public static fn isBundledProto(file: FileDescriptor) -> Boolean {
        file.package == "google.protobuf" && bundledProtoFiles.contains(file.name)
    }
}
