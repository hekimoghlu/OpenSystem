<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <template class="FoundryWorkspace" parent="GtkWidget">
    <child>
      <object class="AdwBreakpointBin">
        <property name="width-request">360</property>
        <property name="height-request">400</property>
        <child>
          <object class="AdwBreakpoint">
            <condition>max-width: 650sp</condition>
            <setter object="multi_layout" property="layout-name">narrow</setter>
          </object>
        </child>
        <property name="child">
          <object class="AdwMultiLayoutView" id="multi_layout">
            <signal name="notify::layout-name" handler="foundry_workspace_layout_changed" swapped="true"/>
            <child>
              <object class="AdwLayout">
                <property name="name">narrow</property>
                <property name="content">
                  <object class="AdwTabOverview">
                    <property name="view">narrow_view</property>
                    <child>
                      <object class="AdwBottomSheet" id="narrow_bottom_sheet">
                        <property name="show-drag-handle">false</property>
                        <property name="content">
                          <object class="AdwToolbarView">
                            <property name="top-bar-style">raised</property>
                            <child type="top">
                              <object class="AdwBin" id="narrow_titlebar_bin">
                              </object>
                            </child>
                            <property name="content">
                              <object class="AdwTabView" id="narrow_view">
                                <signal name="close-page" handler="foundry_workspace_narrow_view_close_page_cb" swapped="true"/>
                              </object>
                            </property>
                            <child type="bottom">
                              <object class="GtkBox">
                                <style>
                                  <class name="toolbar"/>
                                </style>
                                <property name="orientation">horizontal</property>
                                <property name="homogeneous">true</property>
                                <child>
                                  <object class="GtkButton">
                                    <property name="action-name">collapsed.panels.show</property>
                                    <property name="icon-name">panel-top-symbolic</property>
                                    <property name="tooltip-text" translatable="yes">Show Panels</property>
                                  </object>
                                </child>
                                <child>
                                  <object class="AdwTabButton">
                                    <property name="view">narrow_view</property>
                                    <property name="action-name">overview.open</property>
                                  </object>
                                </child>
                                <child>
                                  <!-- TODO: this should come from the application -->
                                  <object class="GtkButton">
                                    <property name="action-name">context.run-manager.run</property>
                                    <property name="icon-name">project-run-start-symbolic</property>
                                    <property name="tooltip-text" translatable="yes">Run Project</property>
                                  </object>
                                </child>
                              </object>
                            </child>
                          </object>
                        </property>
                        <property name="sheet">
                          <object class="GtkStack" id="narrow_stack">
                            <style>
                              <class name="narrow-sidebar"/>
                            </style>
                            <child>
                              <object class="GtkStackPage">
                                <property name="name">auxillary</property>
                                <property name="child">
                                  <object class="AdwToolbarView">
                                    <child type="top">
                                      <object class="AdwHeaderBar">
                                        <child type="title">
                                          <object class="AdwWindowTitle">
                                            <property name="title" translatable="yes">Information</property>
                                          </object>
                                        </child>
                                      </object>
                                    </child>
                                    <property name="content">
                                      <object class="AdwBin" id="narrow_auxillary_bin">
                                      </object>
                                    </property>
                                  </object>
                                </property>
                              </object>
                            </child>
                            <child>
                              <object class="GtkStackPage">
                                <property name="name">panels</property>
                                <property name="child">
                                  <object class="AdwToolbarView">
                                    <child type="top">
                                      <object class="AdwHeaderBar">
                                        <child type="title">
                                          <object class="AdwWindowTitle" id="narrow_panels_title">
                                          </object>
                                        </child>
                                      </object>
                                    </child>
                                    <property name="content">
                                      <object class="GtkBox">
                                        <property name="orientation">vertical</property>
                                        <child>
                                          <object class="GtkStackSwitcher">
                                            <property name="margin-start">6</property>
                                            <property name="margin-end">6</property>
                                            <property name="margin-top">6</property>
                                            <property name="margin-bottom">6</property>
                                            <property name="stack">narrow_panels</property>
                                          </object>
                                        </child>
                                        <child>
                                          <object class="GtkStack" id="narrow_panels">
                                            <signal name="notify::visible-child" handler="foundry_workspace_notify_narrow_panel" swapped="true"/>
                                            <property name="vexpand">true</property>
                                          </object>
                                        </child>
                                      </object>
                                    </property>
                                  </object>
                                </property>
                              </object>
                            </child>
                            <child>
                              <object class="GtkStackPage">
                                <property name="name">menu</property>
                                <property name="child">
                                  <object class="AdwLayoutSlot">
                                    <property name="id">narrow_menu</property>
                                  </object>
                                </property>
                              </object>
                            </child>
                          </object>
                        </property>
                      </object>
                    </child>
                  </object>
                </property>
              </object>
            </child>
            <child>
              <object class="AdwLayout">
                <property name="name">wide</property>
                <property name="content">
                  <object class="PanelDock" id="dock">
                    <child type="start">
                      <object class="AdwToolbarView">
                        <child type="top">
                          <object class="AdwBin" id="sidebar_titlebar_bin">
                          </object>
                        </child>
                        <property name="content">
                          <object class="PanelPaned">
                            <property name="orientation">vertical</property>
                            <child>
                              <object class="FoundryFrame" id="start_frame">
                              </object>
                            </child>
                          </object>
                        </property>
                      </object>
                    </child>
                    <child internal-child="center">
                      <object class="PanelDockChild">
                        <property name="child">
                          <object class="AdwToolbarView">
                            <child type="top">
                              <object class="AdwBin" id="titlebar_bin">
                              </object>
                            </child>
                            <property name="content">
                              <object class="PanelDock" id="subdock">
                                <child type="center">
                                  <object class="PanelGrid" id="grid">
                                    <property name="hexpand">true</property>
                                    <signal name="create-frame" handler="foundry_workspace_create_frame_cb" swapped="true"/>
                                  </object>
                                </child>
                                <child type="end">
                                  <object class="AdwBin" id="wide_auxillary_bin">
                                    <property name="child">auxillary_bin</property>
                                  </object>
                                </child>
                              </object>
                            </property>
                          </object>
                        </property>
                      </object>
                    </child>
                    <child internal-child="bottom">
                      <object class="PanelDockChild">
                        <property name="child">
                          <object class="PanelPaned" id="bottom_area">
                            <property name="orientation">horizontal</property>
                            <child>
                              <object class="PanelFrame" id="bottom_frame">
                                <property name="orientation">horizontal</property>
                              </object>
                            </child>
                          </object>
                        </property>
                        <property name="bottom-edge">
                          <object class="AdwBin" id="status_bin">
                            <property name="hexpand">true</property>
                          </object>
                        </property>
                      </object>
                    </child>
                    <property name="reveal-start">true</property>
                    <property name="start-width">300</property>
                  </object>
                </property>
              </object>
            </child>
            <property name="layout-name">wide</property>
          </object>
        </property>
      </object>
    </child>
  </template>
  <object class="FoundryActionResponderGroup" id="narrow_actions">
    <child>
      <object class="FoundryActionResponder">
        <property name="name">panels.show</property>
        <property name="reaction">
          <object class="FoundryMultiReaction">
            <child>
              <object class="FoundryPropertyReaction">
                <property name="object">narrow_stack</property>
                <property name="name">visible-child-name</property>
                <property name="value">
                  <constant type="gchararray">panels</constant>
                </property>
              </object>
            </child>
            <child>
              <object class="FoundryPropertyReaction">
                <property name="object">narrow_bottom_sheet</property>
                <property name="name">open</property>
                <property name="value">
                  <constant type="gboolean">true</constant>
                </property>
              </object>
            </child>
          </object>
        </property>
      </object>
    </child>
    <child>
      <object class="FoundryActionResponder">
        <property name="name">auxillary.show</property>
        <property name="reaction">
          <object class="FoundryMultiReaction">
            <child>
              <object class="FoundryPropertyReaction">
                <property name="object">narrow_stack</property>
                <property name="name">visible-child-name</property>
                <property name="value">
                  <constant type="gchararray">auxillary</constant>
                </property>
              </object>
            </child>
            <child>
              <object class="FoundryPropertyReaction">
                <property name="object">narrow_bottom_sheet</property>
                <property name="name">open</property>
                <property name="value">
                  <constant type="gboolean">true</constant>
                </property>
              </object>
            </child>
          </object>
        </property>
      </object>
    </child>
  </object>
  <object class="AdwBin" id="auxillary_bin">
    <binding name="child">
      <lookup name="auxillary" type="FoundryPage">
        <lookup name="active-page">FoundryWorkspace</lookup>
      </lookup>
    </binding>
  </object>
</interface>
